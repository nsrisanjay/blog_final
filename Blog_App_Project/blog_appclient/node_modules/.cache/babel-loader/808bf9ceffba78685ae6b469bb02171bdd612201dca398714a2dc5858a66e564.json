{"ast":null,"code":"import React from'react';import{useNavigate}from'react-router-dom';import{useState,useEffect}from'react';import axios from'axios';import{MdReadMore}from\"react-icons/md\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Articles(){const[articlesList,setArticlesList]=useState([]);let navigate=useNavigate();//get token from the local storage\nlet token=localStorage.getItem('token');//create the axios with token\nlet axiosWithToken=axios.create({headers:{Authorization:\"Bearer \".concat(token)}});const getArticlesOfCurrentAuthor=async()=>{let res=await axiosWithToken.get(\"http://localhost:4000/user-api/articles\");setArticlesList(res.data.payload);};const readArticleByArticleId=async articleObj=>{await axiosWithToken.put(\"http://localhost:4000/user-api/views\",articleObj);navigate(\"../article/\".concat(articleObj.articleId),{state:articleObj});};useEffect(()=>{getArticlesOfCurrentAuthor();},[]);//convert ISO date to UTC data\nfunction ISOtoUTC(iso){let date=new Date(iso).getUTCDate();let day=new Date(iso).getUTCDay();let month=new Date(iso).getUTCMonth();let year=new Date(iso).getUTCFullYear();return\"\".concat(date,\"/\").concat(month+1,\"/\").concat(year);}return/*#__PURE__*/_jsx(\"div\",{className:\"container m-4 d-block m-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4 mt-5\",children:articlesList.map(article=>/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card h-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:article.title}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:article.Content.substring(0,80)+\"....\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-success px-4 m-auto d-block\",onClick:()=>readArticleByArticleId(article),children:[/*#__PURE__*/_jsx(MdReadMore,{className:\"fs-4\"}),\" Read More\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer d-flex justify-content-between\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-body-secondary\",children:[\"Last updated on \",ISOtoUTC(article.dateOfModification)]})})]})},article.articleId))})});}export default Articles;","map":{"version":3,"names":["React","useNavigate","useState","useEffect","axios","MdReadMore","jsx","_jsx","jsxs","_jsxs","Articles","articlesList","setArticlesList","navigate","token","localStorage","getItem","axiosWithToken","create","headers","Authorization","concat","getArticlesOfCurrentAuthor","res","get","data","payload","readArticleByArticleId","articleObj","put","articleId","state","ISOtoUTC","iso","date","Date","getUTCDate","day","getUTCDay","month","getUTCMonth","year","getUTCFullYear","className","children","map","article","title","Content","substring","onClick","dateOfModification"],"sources":["C:/Users/nsris/Documents/blogproj/Blog_App_Project/blog_appclient/src/components/Articles.js"],"sourcesContent":["import React from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useState,useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { MdReadMore } from \"react-icons/md\";\r\nfunction Articles() {\r\n\r\n\r\n  const [articlesList, setArticlesList] = useState([]);\r\n  let navigate=useNavigate()\r\n\r\n  //get token from the local storage\r\n  let token = localStorage.getItem('token')\r\n  //create the axios with token\r\n  let axiosWithToken=axios.create({\r\n      headers:{Authorization:`Bearer ${token}`}\r\n  })\r\n\r\n\r\n  const getArticlesOfCurrentAuthor=async()=>{\r\n    let res=await axiosWithToken.get(`http://localhost:4000/user-api/articles`)\r\n    setArticlesList(res.data.payload)\r\n  }\r\n\r\n\r\n  const readArticleByArticleId=async (articleObj)=>{\r\n    await axiosWithToken.put(`http://localhost:4000/user-api/views`,articleObj)\r\n    navigate(`../article/${articleObj.articleId}`,{state:articleObj})\r\n  }\r\n\r\n    useEffect(()=>{\r\n      getArticlesOfCurrentAuthor()\r\n    },[])\r\n\r\n    //convert ISO date to UTC data\r\n  function ISOtoUTC(iso) {\r\n    let date = new Date(iso).getUTCDate();\r\n    let day = new Date(iso).getUTCDay();\r\n    let month= new Date(iso).getUTCMonth();\r\n    let year = new Date(iso).getUTCFullYear();\r\n    return `${date}/${month+1}/${year}`;\r\n  }\r\n\r\n  return (\r\n    <div className='container m-4 d-block m-auto'>\r\n      <div className=\"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4 mt-5\">\r\n            {articlesList.map((article) => (\r\n              <div className=\"col\" key={article.articleId}>\r\n                <div className=\"card h-100\">\r\n                  <div className=\"card-body\">\r\n                    <h5 className=\"card-title\">{article.title}</h5>\r\n                    <p className=\"card-text\">\r\n                      {article.Content.substring(0, 80) + \"....\"}\r\n                    </p>\r\n                    <button className='btn btn-success px-4 m-auto d-block' onClick={()=>readArticleByArticleId(article)}><MdReadMore className='fs-4'/> Read More</button>\r\n                  </div>\r\n                  <div className=\"card-footer d-flex justify-content-between\">\r\n                    <small className=\"text-body-secondary\">\r\n                      Last updated on {ISOtoUTC(article.dateOfModification)}\r\n                    </small>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n      </div>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default Articles"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}